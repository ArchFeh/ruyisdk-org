<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>RuyiSDK Blog</title>
        <link>https://archfeh.github.io/ruyisdk-org/en/blog</link>
        <description>RuyiSDK Blog</description>
        <lastBuildDate>Mon, 08 Jul 2024 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Early Access: Using Box64 to Run WPS Office on RISC-V Systems]]></title>
            <link>https://archfeh.github.io/ruyisdk-org/en/blog/2024/07/08/box64-wps-office-poc</link>
            <guid>https://archfeh.github.io/ruyisdk-org/en/blog/2024/07/08/box64-wps-office-poc</guid>
            <pubDate>Mon, 08 Jul 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[得益于 Box64 RISC-V 移植工作的进展，在 RISC-V Linux 桌面发行版上运行 WPS]]></description>
            <content:encoded><![CDATA[<p>得益于 Box64 RISC-V 移植工作的进展，在 RISC-V Linux 桌面发行版上运行 WPS
Office 等常见 x86 二进制软件已成为可能。RuyiSDK 正在开展此方面的集成工作；
按以下的步骤操作，您将能先行一步感受 RISC-V 办公体验。</p>
<p>我们假定您在进行以下操作之前，已经升级到了 <code>ruyi</code> 0.14.0 或更高的版本，
并执行了 <code>ruyi update</code> 以将软件源信息同步到最新。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_emO8" id="操作步骤">操作步骤<a class="hash-link" aria-label="Direct link to 操作步骤" title="Direct link to 操作步骤" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/07/08/box64-wps-office-poc#%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4">​</a></h2>
<p>为叙述方便，设您的 <code>$HOME</code> 为 <code>/home/foo</code>，架构（<code>uname -m</code> 输出）为
<code>riscv64</code>，使用 <code>sudo</code> 提权。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_emO8" id="允许安装预发布版本的软件包">允许安装预发布版本的软件包<a class="hash-link" aria-label="Direct link to 允许安装预发布版本的软件包" title="Direct link to 允许安装预发布版本的软件包" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/07/08/box64-wps-office-poc#%E5%85%81%E8%AE%B8%E5%AE%89%E8%A3%85%E9%A2%84%E5%8F%91%E5%B8%83%E7%89%88%E6%9C%AC%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%8C%85">​</a></h3>
<p>由于 Box64 RISC-V 支持进展迅速，目前（2024 年 7 月初）很多功能改进没有在
其最新稳定版本得到体现。我们打包了 Box64 的开发快照版本；为了能够安装此版本，
您需要配置 <code>ruyi</code> 以使其在安装软件包时考虑预发布版本。</p>
<ul>
<li>如果 <code>~/.config/ruyi</code> 目录不存在，则创建之。</li>
<li>编辑 <code>~/.config/ruyi/config.toml</code>。</li>
</ul>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[packages]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">prereleases = true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_emO8" id="安装-box64">安装 Box64<a class="hash-link" aria-label="Direct link to 安装 Box64" title="Direct link to 安装 Box64" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/07/08/box64-wps-office-poc#%E5%AE%89%E8%A3%85-box64">​</a></h3>
<p>按照 RuyiSDK 软件包的命名习惯，从 Box64 的上游（而非 PLCT 或某些厂商的 fork）
构建的 Box64 二进制包，名字叫 <code>box64-upstream</code>。</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ruyi </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> box64-upstream</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># info: package box64-upstream-0.2.8-ruyi.20240702 installed to /home/foo/.local/share/ruyi/binaries/riscv64/box64-upstream-0.2.8-ruyi.20240702</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>记下安装路径。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_emO8" id="配置-linux-binfmt_misc-机制">配置 Linux <code>binfmt_misc</code> 机制<a class="hash-link" aria-label="Direct link to 配置-linux-binfmt_misc-机制" title="Direct link to 配置-linux-binfmt_misc-机制" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/07/08/box64-wps-office-poc#%E9%85%8D%E7%BD%AE-linux-binfmt_misc-%E6%9C%BA%E5%88%B6">​</a></h3>
<p>由于 WPS Office 的打包方式特殊，它只能从开发商提供的启动器脚本被间接拉起，
而不能直接交由 Box64 启动。因此您需要确保您的系统支持 <code>binfmt_misc</code>：
如果不支持，接下来的操作会失败。</p>
<p>不同 Linux 发行版的 <code>binfmt_misc</code> 配置方式不尽相同，以下针对采用 systemd
的系统叙述。您可以根据自身情况自行调整。</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 确认 Box64 可执行文件的位置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">ls</span><span class="token plain"> /home/foo/.local/share/ruyi/binaries/riscv64/box64-upstream-0.2.8-ruyi.20240702/bin/box64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 调整 Box64 `binfmt.d` 配置文件的路径</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 假设您使用 nano 编辑器</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">nano</span><span class="token plain"> /home/foo/.local/share/ruyi/binaries/riscv64/box64-upstream-0.2.8-ruyi.20240702/etc/binfmt.d/box64.conf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 将行尾的 //bin/box64 改为先前验证过的绝对路径</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 将其部署到系统</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">cp</span><span class="token plain"> /home/foo/.local/share/ruyi/binaries/riscv64/box64-upstream-0.2.8-ruyi.20240702/etc/binfmt.d/box64.conf /etc/binfmt.d/box64.conf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl restart systemd-binfmt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 检查部署结果</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> /proc/sys/fs/binfmt_misc/box64</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_emO8" id="安装-x86-sysroot">安装 x86 sysroot<a class="hash-link" aria-label="Direct link to 安装 x86 sysroot" title="Direct link to 安装 x86 sysroot" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/07/08/box64-wps-office-poc#%E5%AE%89%E8%A3%85-x86-sysroot">​</a></h3>
<p>由于 Box64 主要面向游戏等软件的模拟，而这些软件基本都自带所有依赖，所以 Box64
本身基本没有自带什么 x86 运行时库。WPS Office 作为一个预期被系统包管理器管理的
桌面应用，Box64 自带的少量 x86 运行时库无法满足它的需求，因此我们需要自行准备
x86 环境。</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 下载预制的 x86 sysroot</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 此为临时性的链接。后续待本功能迭代稳定之后，操作方式将改变，此链接也将失效</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 假设此文件放在了 ~/Downloads 目录下</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">wget</span><span class="token plain"> https://mirror.iscas.ac.cn/ruyisdk/dist/temp/debian-bookworm.gui.20240705.amd64.tar.zst</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 假设安装到 /opt/debian-bookworm.amd64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token plain"> /opt/debian-bookworm.amd64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">pushd</span><span class="token plain"> /opt/debian-bookworm.amd64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">tar</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-xf</span><span class="token plain"> ~/Downloads/debian-bookworm.gui.20240705.amd64.tar.zst</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">popd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_emO8" id="安装-wps-office">安装 WPS Office<a class="hash-link" aria-label="Direct link to 安装 WPS Office" title="Direct link to 安装 WPS Office" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/07/08/box64-wps-office-poc#%E5%AE%89%E8%A3%85-wps-office">​</a></h3>
<p>强制安装 <code>x86_64</code> 架构的 WPS Office 软件包：</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ruyi </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--host</span><span class="token plain"> x86_64 wps-office</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># info: package wps-office-11.1.0-r.11719 installed to /home/foo/.local/share/ruyi/binaries/x86_64/wps-office-11.1.0-r.11719</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>由于 WPS Office 官方下载页面的限制，<code>ruyi</code> 无法自动下载安装包。
请按照提示信息操作，之后重新执行该命令以安装。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_emO8" id="调整-wps-office-启动器脚本">调整 WPS Office 启动器脚本<a class="hash-link" aria-label="Direct link to 调整 WPS Office 启动器脚本" title="Direct link to 调整 WPS Office 启动器脚本" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/07/08/box64-wps-office-poc#%E8%B0%83%E6%95%B4-wps-office-%E5%90%AF%E5%8A%A8%E5%99%A8%E8%84%9A%E6%9C%AC">​</a></h3>
<p>由于 WPS Office 预期自身被系统包管理器管理，它的启动器脚本假定了自身的安装路径
为 <code>/opt/kingsoft/wps-office</code>，需要为它们打补丁。</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">pushd</span><span class="token plain"> /home/foo/.local/share/ruyi/binaries/x86_64/wps-office-11.1.0-r.11719</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 当前工作目录路径中应当不含特殊字符。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 如果含有，请自行适当调整 sed 命令的参数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-i</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"s@gInstallPath=/@gInstallPath=</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable builtin class-name" style="color:rgb(189, 147, 249);font-style:italic">pwd</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)">/@"</span><span class="token plain"> ./usr/bin/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">popd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_emO8" id="运行-wps-office">运行 WPS Office<a class="hash-link" aria-label="Direct link to 运行 WPS Office" title="Direct link to 运行 WPS Office" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/07/08/box64-wps-office-poc#%E8%BF%90%E8%A1%8C-wps-office">​</a></h3>
<p>准备工作终于完成，现在将所有部分串起来：</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 此动态链接库的原生转发仍有些问题，因此强制以模拟方式执行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">BOX64_EMULATED_LIBS</span><span class="token operator">=</span><span class="token plain">libsqlite3.so.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 配置 Box64 库搜索路径</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">BOX64_LD_LIBRARY_PATH</span><span class="token operator">=</span><span class="token plain">/opt/debian-bookworm.amd64/usr/lib/x86_64-linux-gnu</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 现在可以执行了！</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/home/foo/.local/share/ruyi/binaries/x86_64/wps-office-11.1.0-r.11719/usr/bin/wps</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_emO8" id="结语">结语<a class="hash-link" aria-label="Direct link to 结语" title="Direct link to 结语" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/07/08/box64-wps-office-poc#%E7%BB%93%E8%AF%AD">​</a></h2>
<p>以上是 RuyiSDK 对 RISC-V 二进制翻译 x86 软件的初步集成成果。
今后我们仍将迭代这一过程的用户体验，以期用户在 RISC-V 系统上运行需要的应用
更加方便。</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Release notes for RuyiSDK 0.12]]></title>
            <link>https://archfeh.github.io/ruyisdk-org/en/blog/2024/06/11/ruyi-0.12</link>
            <guid>https://archfeh.github.io/ruyisdk-org/en/blog/2024/06/11/ruyi-0.12</guid>
            <pubDate>Tue, 11 Jun 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[RuyiSDK 0.12 is now released. The corresponding package manager version is also 0.12.]]></description>
            <content:encoded><![CDATA[<p>RuyiSDK 0.12 is now released. The corresponding package manager version is also 0.12.
You can download the RuyiSDK package manager from one of the following locations:</p>
<ul>
<li><a href="https://github.com/ruyisdk/ruyi/releases/tag/0.12.0" target="_blank" rel="noopener noreferrer">https://github.com/ruyisdk/ruyi/releases/tag/0.12.0</a></li>
<li><a href="https://mirror.iscas.ac.cn/ruyisdk/ruyi/releases/0.12.0/" target="_blank" rel="noopener noreferrer">https://mirror.iscas.ac.cn/ruyisdk/ruyi/releases/0.12.0/</a></li>
</ul>
<p>This update mainly consists of the following changes. Happy hacking!</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_emO8" id="ruyisdk-package-manager">RuyiSDK Package Manager<a class="hash-link" aria-label="Direct link to RuyiSDK Package Manager" title="Direct link to RuyiSDK Package Manager" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/06/11/ruyi-0.12#ruyisdk-package-manager">​</a></h2>
<ul>
<li>The Pine64 Star64 Armbian image can now be correctly downloaded.</li>
<li>The user experience for downloading fetch-restricted files is implemented.
A hint message will be rendered according to the current system locale setting
when such a file is requested.</li>
<li>pygit2 has been upgraded to 1.5.0 to support libgit2 1.8.</li>
<li>The <code>XDG_STATE_HOME</code> environment variable is now correctly respected.</li>
</ul>
<p>To support devices that require manual intervention during provisioning, and
whose images have to be downloaded manually, the RuyiSDK Device Provisioner is
now being refactored to handle those complex situations, with the next version
expected to be fit for testing. Older versions of the device provisioner will
stop working at that time; please upgrade before you test.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Release notes for RuyiSDK 0.11]]></title>
            <link>https://archfeh.github.io/ruyisdk-org/en/blog/2024/05/28/ruyi-0.11</link>
            <guid>https://archfeh.github.io/ruyisdk-org/en/blog/2024/05/28/ruyi-0.11</guid>
            <pubDate>Tue, 28 May 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[RuyiSDK 0.11 is now released. The corresponding package manager version is also 0.11.]]></description>
            <content:encoded><![CDATA[<p>RuyiSDK 0.11 is now released. The corresponding package manager version is also 0.11.
You can download the RuyiSDK package manager from one of the following locations:</p>
<ul>
<li><a href="https://github.com/ruyisdk/ruyi/releases/tag/0.11.0" target="_blank" rel="noopener noreferrer">https://github.com/ruyisdk/ruyi/releases/tag/0.11.0</a></li>
<li><a href="https://mirror.iscas.ac.cn/ruyisdk/ruyi/releases/0.11.0/" target="_blank" rel="noopener noreferrer">https://mirror.iscas.ac.cn/ruyisdk/ruyi/releases/0.11.0/</a></li>
</ul>
<p>This update mainly consists of the following changes. Happy hacking!</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_emO8" id="ruyisdk-package-manager">RuyiSDK Package Manager<a class="hash-link" aria-label="Direct link to RuyiSDK Package Manager" title="Direct link to RuyiSDK Package Manager" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/05/28/ruyi-0.11#ruyisdk-package-manager">​</a></h2>
<ul>
<li>Removed the only LGPL dependency so far. The entirety of RuyiSDK Package
Manager and its dependencies are now permissively licensed, which means
downstream users are free to use the RuyiSDK Package Manager in a
commercial fashion from now on.</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_emO8" id="ruyisdk-software-repository">RuyiSDK Software Repository<a class="hash-link" aria-label="Direct link to RuyiSDK Software Repository" title="Direct link to RuyiSDK Software Repository" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/05/28/ruyi-0.11#ruyisdk-software-repository">​</a></h2>
<ul>
<li>The Ruyi Device Provisioner (<code>ruyi device provision</code>) now supports the following device models:<!-- -->
<ul>
<li>Pine64 Star64</li>
</ul>
</li>
</ul>
<p>Please run <code>ruyi update</code> to pull in the update after upgrading the RuyiSDK
package manager.</p>
<p>We have noticed that more and more device models (even including the newly
announced BananaPi BPI-F3) are having their system images distributed by
means of net-disks only, such as Baidu Netdisk, Google Drive or MEGA.
It is a challenge to support such models due to this; we will attempt to do
so nevertheless in the coming releases. Stay tuned and your contribution is
welcome!</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Release notes for RuyiSDK 0.10]]></title>
            <link>https://archfeh.github.io/ruyisdk-org/en/blog/2024/05/14/ruyi-0.10</link>
            <guid>https://archfeh.github.io/ruyisdk-org/en/blog/2024/05/14/ruyi-0.10</guid>
            <pubDate>Tue, 14 May 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[RuyiSDK 0.10 is now released. The corresponding package manager version is also 0.10.]]></description>
            <content:encoded><![CDATA[<p>RuyiSDK 0.10 is now released. The corresponding package manager version is also 0.10.
You can download the RuyiSDK package manager from one of the following locations:</p>
<ul>
<li><a href="https://github.com/ruyisdk/ruyi/releases/tag/0.10.0" target="_blank" rel="noopener noreferrer">https://github.com/ruyisdk/ruyi/releases/tag/0.10.0</a></li>
<li><a href="https://mirror.iscas.ac.cn/ruyisdk/ruyi/releases/0.10.0/" target="_blank" rel="noopener noreferrer">https://mirror.iscas.ac.cn/ruyisdk/ruyi/releases/0.10.0/</a></li>
</ul>
<p>This update mainly consists of the following changes. Happy hacking!</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_emO8" id="ruyisdk-package-manager">RuyiSDK Package Manager<a class="hash-link" aria-label="Direct link to RuyiSDK Package Manager" title="Direct link to RuyiSDK Package Manager" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/05/14/ruyi-0.10#ruyisdk-package-manager">​</a></h2>
<ul>
<li>A global command-line option <code>--porcelain</code> is now supported for external programs to conveniently interact with <code>ruyi</code>. <code>ruyi list</code> and <code>ruyi news list</code> are the first to gain a porcelain output format.</li>
<li><code>ruyi news list</code> now prefers to present a news item in the system's current language if a translation is available.</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_emO8" id="ruyisdk-software-repository">RuyiSDK Software Repository<a class="hash-link" aria-label="Direct link to RuyiSDK Software Repository" title="Direct link to RuyiSDK Software Repository" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/05/14/ruyi-0.10#ruyisdk-software-repository">​</a></h2>
<p>RuyiSDK begins to support WinChipHead (WCH) RISC-V products from version 0.10 on.</p>
<ul>
<li>The LLVM toolchain maintained by PLCT is now packaged: <code>toolchain/llvm-plct</code>, whose main feature is support for the <code>XTHeadVector</code> extension.</li>
<li>The Ruyi Device Provisioner (<code>ruyi device provision</code>) now supports the following device models:<!-- -->
<ul>
<li>WCH CH32V103 EVB</li>
<li>WCH CH32V203 EVB</li>
<li>WCH CH32V208 EVB</li>
<li>WCH CH32V303 EVB</li>
<li>WCH CH32V305 EVB</li>
<li>WCH CH32V307 EVB</li>
<li>WCH CH582F EVB</li>
<li>WCH CH592X EVB</li>
</ul>
</li>
</ul>
<p>Please run <code>ruyi update</code> to pull in the update after upgrading the RuyiSDK
package manager.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Release notes for RuyiSDK 0.9]]></title>
            <link>https://archfeh.github.io/ruyisdk-org/en/blog/2024/04/23/ruyi-0.9</link>
            <guid>https://archfeh.github.io/ruyisdk-org/en/blog/2024/04/23/ruyi-0.9</guid>
            <pubDate>Tue, 23 Apr 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[RuyiSDK 0.9 is now released. The corresponding package manager version is also 0.9.]]></description>
            <content:encoded><![CDATA[<p>RuyiSDK 0.9 is now released. The corresponding package manager version is also 0.9.
You can download the RuyiSDK package manager from one of the following locations:</p>
<ul>
<li><a href="https://github.com/ruyisdk/ruyi/releases/tag/0.9.0" target="_blank" rel="noopener noreferrer">https://github.com/ruyisdk/ruyi/releases/tag/0.9.0</a></li>
<li><a href="https://mirror.iscas.ac.cn/ruyisdk/ruyi/releases/0.9.0/" target="_blank" rel="noopener noreferrer">https://mirror.iscas.ac.cn/ruyisdk/ruyi/releases/0.9.0/</a></li>
</ul>
<p>This update mainly consists of the following changes. Happy hacking!</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_emO8" id="ruyisdk-package-manager">RuyiSDK Package Manager<a class="hash-link" aria-label="Direct link to RuyiSDK Package Manager" title="Direct link to RuyiSDK Package Manager" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/04/23/ruyi-0.9#ruyisdk-package-manager">​</a></h2>
<ul>
<li>Unpacking of LZ4-compressed files is now supported.</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_emO8" id="ruyisdk-software-repository">RuyiSDK Software Repository<a class="hash-link" aria-label="Direct link to RuyiSDK Software Repository" title="Direct link to RuyiSDK Software Repository" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/04/23/ruyi-0.9#ruyisdk-software-repository">​</a></h2>
<p>RuyiSDK supports the entire Sipeed RISC-V product line from version 0.9 on.</p>
<p>The Ruyi Device Provisioner (<code>ruyi device provision</code>) now supports the following device models:</p>
<ul>
<li>Sipeed LicheeRV Nano</li>
<li>Sipeed Lichee Cluster 4A</li>
<li>Sipeed Lichee Console 4A</li>
<li>Sipeed Maix-I</li>
<li>Sipeed Tang Mega 138K Pro</li>
</ul>
<p>In addition to the following models for whose support is already present:</p>
<ul>
<li>Sipeed LicheePi 4A</li>
<li>Sipeed LicheeRV</li>
</ul>
<p>Please run <code>ruyi update</code> to pull in the update after upgrading the RuyiSDK
package manager.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[RV64ILP32 bare-metal toolchain & profile now available]]></title>
            <link>https://archfeh.github.io/ruyisdk-org/en/blog/2024/02/26/gnu-plct-rv64ilp32-elf</link>
            <guid>https://archfeh.github.io/ruyisdk-org/en/blog/2024/02/26/gnu-plct-rv64ilp32-elf</guid>
            <pubDate>Mon, 26 Feb 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[For your convenience following bleeding-edge development, the RuyiSDK team]]></description>
            <content:encoded><![CDATA[<p>For your convenience following bleeding-edge development, the RuyiSDK team
has packaged a bare-metal toolchain targetting the experimental RV64ILP32 ABI.
Because this is a bare-metal toolchain, no sysroot is provided, and multilib
is not enabled: the ABI to use is <code>ilp32d</code>.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_emO8" id="usage-example">Usage example<a class="hash-link" aria-label="Direct link to Usage example" title="Direct link to Usage example" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/02/26/gnu-plct-rv64ilp32-elf#usage-example">​</a></h2>
<p>Given the following C program:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// test.c</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">long</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">long</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">long</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">long</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">long</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">long</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">a </span><span class="token operator">+</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// Should be realized with `ld` and `add`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">check</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">check_sizes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">check</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// a0 should be 4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">check</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">long</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">       </span><span class="token comment" style="color:rgb(98, 114, 164)">// a0 should be 4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">check</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">long</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">long</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// a0 should be 8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">check</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)">// a0 should be 4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We can now build object code conforming to the RV64ILP32 ABI with the proper
toolchain package and profile:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ ruyi update</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ ruyi install gnu-plct-rv64ilp32-elf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ ruyi venv -t gnu-plct-rv64ilp32-elf --without-sysroot baremetal-rv64ilp32 /tmp/venv</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ source /tmp/venv/bin/ruyi-activate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ /tmp/venv11/bin/riscv64-plct-elf-gcc -O2 -c -o test.o test.c</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Checking that everything works as intended:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ riscv64-plct-elf-readelf -h test.o | grep 32</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Class:                             ELF32</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Flags:                             0x25, RVC, X32, double-float ABI</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ riscv64-plct-elf-objdump -dw test.o</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">test.o:     file format elf32-littleriscv</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Disassembly of section .text:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">00000000 &lt;add&gt;:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   0:   6108                    ld      a0,0(a0)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   2:   952e                    add     a0,a0,a1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   4:   8082                    ret</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">00000006 &lt;check_sizes&gt;:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   6:   3141                    addiw   sp,sp,-16</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   8:   4511                    li      a0,4</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   a:   e406                    sd      ra,8(sp)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   c:   00000097                auipc   ra,0x0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  10:   000080e7                jalr    ra # c &lt;check_sizes+0x6&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  14:   4511                    li      a0,4</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  16:   00000097                auipc   ra,0x0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  1a:   000080e7                jalr    ra # 16 &lt;check_sizes+0x10&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  1e:   4521                    li      a0,8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  20:   00000097                auipc   ra,0x0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  24:   000080e7                jalr    ra # 20 &lt;check_sizes+0x1a&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  28:   60a2                    ld      ra,8(sp)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  2a:   4511                    li      a0,4</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  2c:   2141                    addiw   sp,sp,16</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  2e:   00000317                auipc   t1,0x0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  32:   00030067                jr      t1 # 2e &lt;check_sizes+0x28&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It can thus be shown that the toolchain indeed generates object code with
32-bit pointer width, but also leveraging RV64 capabilities.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[New board images available (2024-01-29)]]></title>
            <link>https://archfeh.github.io/ruyisdk-org/en/blog/2024/01/29/new-board-images</link>
            <guid>https://archfeh.github.io/ruyisdk-org/en/blog/2024/01/29/new-board-images</guid>
            <pubDate>Mon, 29 Jan 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Image packages are now available for the following boards.]]></description>
            <content:encoded><![CDATA[<p>Image packages are now available for the following boards.</p>
<p>You can have your device automatically provisioned with the RuyiSDK Device
Provisioning Wizard <code>ruyi device provision</code>. Or you can still manually
install with <code>ruyi install</code>: files will be automatically unpacked or
symlinked to <code>~/.local/share/ruyi/blobs/&lt;package name&gt;-&lt;version&gt;</code>.</p>
<p>Thank you for supporting RuyiSDK!</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_emO8" id="sipeed-licheerv--allwinner-nezha-d1">Sipeed LicheeRV &amp; Allwinner Nezha D1<a class="hash-link" aria-label="Direct link to Sipeed LicheeRV &amp; Allwinner Nezha D1" title="Direct link to Sipeed LicheeRV &amp; Allwinner Nezha D1" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/01/29/new-board-images#sipeed-licheerv--allwinner-nezha-d1">​</a></h2>
<p>The two models are largely compatible from a hardware perspective, but there
are still slight differences that only shows up in the device trees.</p>
<ul>
<li><code>board-image/oerv-awol-d1-base</code>: openEuler RISC-V, base system</li>
<li><code>board-image/oerv-awol-d1-xfce</code>: openEuler RISC-V, with XFCE GUI</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_emO8" id="starfive-visionfive">StarFive VisionFive<a class="hash-link" aria-label="Direct link to StarFive VisionFive" title="Direct link to StarFive VisionFive" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/01/29/new-board-images#starfive-visionfive">​</a></h2>
<ul>
<li><code>board-image/oerv-starfive-visionfive-base</code>: openEuler RISC-V, base system</li>
<li><code>board-image/oerv-starfive-visionfive-xfce</code>: openEuler RISC-V, with XFCE GUI</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_emO8" id="starfive-visionfive2">StarFive VisionFive2<a class="hash-link" aria-label="Direct link to StarFive VisionFive2" title="Direct link to StarFive VisionFive2" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/01/29/new-board-images#starfive-visionfive2">​</a></h2>
<ul>
<li><code>board-image/oerv-starfive-visionfive2-base</code>: openEuler RISC-V, base system</li>
<li><code>board-image/oerv-starfive-visionfive2-xfce</code>: openEuler RISC-V, with XFCE GUI</li>
</ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Release notes for RuyiSDK 0.4]]></title>
            <link>https://archfeh.github.io/ruyisdk-org/en/blog/2024/01/29/ruyi-0.4</link>
            <guid>https://archfeh.github.io/ruyisdk-org/en/blog/2024/01/29/ruyi-0.4</guid>
            <pubDate>Mon, 29 Jan 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[RuyiSDK 0.4 is now released. The corresponding package manager version is also 0.4.]]></description>
            <content:encoded><![CDATA[<p>RuyiSDK 0.4 is now released. The corresponding package manager version is also 0.4.
You can download the RuyiSDK package manager from the GitHub Releases page:
<a href="https://github.com/ruyisdk/ruyi/releases" target="_blank" rel="noopener noreferrer">https://github.com/ruyisdk/ruyi/releases</a> .</p>
<p>This update mainly consists of the following changes. Happy hacking!</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_emO8" id="ruyisdk-package-manager">RuyiSDK Package Manager<a class="hash-link" aria-label="Direct link to RuyiSDK Package Manager" title="Direct link to RuyiSDK Package Manager" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/01/29/ruyi-0.4#ruyisdk-package-manager">​</a></h2>
<ul>
<li><code>ruyi device provision</code> now wraps invocations of <code>fastboot</code> with <code>sudo</code>.</li>
<li><code>ruyi self uninstall --purge</code> now does not forget to remove the
<code>~/.local/state/ruyi</code> directory.</li>
<li>Some hints are now provided when <code>ruyi</code> fails to download from the repo,
for aiding the user's troubleshooting.</li>
<li>The RuyiSDK software repository is now migrated to GitHub for stability of
service. You may have to take additional measures to continue syncing if
your region/organization have network access restrictions in place.</li>
</ul>
<p>The repo at the original location will stop being regularly updated from
2024-02-01 on. Please upgrade your <code>ruyi</code> installation as soon as possible
to automatically migrate to the latest configuration defaults.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_emO8" id="ruyisdk-software-repository">RuyiSDK Software Repository<a class="hash-link" aria-label="Direct link to RuyiSDK Software Repository" title="Direct link to RuyiSDK Software Repository" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/01/29/ruyi-0.4#ruyisdk-software-repository">​</a></h2>
<ul>
<li>Added the DynamoRIO suite <code>analyzer/dynamorio-riscv</code> for RISC-V hosts.</li>
<li>Added system-level QEMU package <code>emulator/qemu-system-riscv-upstream</code> for AMD64 hosts.</li>
<li>The upstream QEMU build is now bumped to 8.2.0.</li>
</ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[New board images available (2024-01-15)]]></title>
            <link>https://archfeh.github.io/ruyisdk-org/en/blog/2024/01/15/new-board-images</link>
            <guid>https://archfeh.github.io/ruyisdk-org/en/blog/2024/01/15/new-board-images</guid>
            <pubDate>Mon, 15 Jan 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Image packages are now available for the following boards.]]></description>
            <content:encoded><![CDATA[<p>Image packages are now available for the following boards.</p>
<p>You can install them with <code>ruyi install</code>: files will be automatically
unpacked or symlinked to <code>~/.local/share/ruyi/blobs/&lt;package name&gt;-&lt;version&gt;</code>.</p>
<p>Thank you for supporting RuyiSDK!</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_emO8" id="milk-v-duo">Milk-V Duo<a class="hash-link" aria-label="Direct link to Milk-V Duo" title="Direct link to Milk-V Duo" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/01/15/new-board-images#milk-v-duo">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_emO8" id="64m-ram-variant">64M RAM variant<a class="hash-link" aria-label="Direct link to 64M RAM variant" title="Direct link to 64M RAM variant" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/01/15/new-board-images#64m-ram-variant">​</a></h3>
<ul>
<li><code>board-image/buildroot-sdk-milkv-duo</code>: official Buildroot SDK</li>
<li><code>board-image/buildroot-sdk-milkv-duo-python</code>: official Buildroot SDK, with Python environment</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_emO8" id="256m-ram-variant">256M RAM variant<a class="hash-link" aria-label="Direct link to 256M RAM variant" title="Direct link to 256M RAM variant" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/01/15/new-board-images#256m-ram-variant">​</a></h3>
<ul>
<li><code>board-image/buildroot-sdk-milkv-duo256m</code>: official Buildroot SDK</li>
<li><code>board-image/buildroot-sdk-milkv-duo256m-python</code>: official Buildroot SDK, with Python environment</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_emO8" id="milk-v-pioneer">Milk-V Pioneer<a class="hash-link" aria-label="Direct link to Milk-V Pioneer" title="Direct link to Milk-V Pioneer" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/01/15/new-board-images#milk-v-pioneer">​</a></h2>
<ul>
<li><code>board-image/oerv-sg2042-milkv-pioneer-base</code>: openEuler RISC-V, base system</li>
<li><code>board-image/oerv-sg2042-milkv-pioneer-xfce</code>: openEuler RISC-V, with XFCE GUI</li>
<li><code>board-image/revyos-sg2042-milkv-pioneer</code>: RevyOS</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_emO8" id="sipeed-licheepi-4a">Sipeed LicheePi 4A<a class="hash-link" aria-label="Direct link to Sipeed LicheePi 4A" title="Direct link to Sipeed LicheePi 4A" href="https://archfeh.github.io/ruyisdk-org/en/blog/2024/01/15/new-board-images#sipeed-licheepi-4a">​</a></h2>
<p>System images:</p>
<ul>
<li><code>board-image/oerv-sipeed-lpi4a-headless</code>: openEuler RISC-V, without GUI</li>
<li><code>board-image/oerv-sipeed-lpi4a-xfce</code>: openEuler RISC-V, with XFCE GUI</li>
<li><code>board-image/revyos-sipeed-lpi4a</code>: RevyOS</li>
</ul>
<p>Bootloader (U-Boot):</p>
<ul>
<li><code>board-image/uboot-oerv-sipeed-lpi4a-16g</code>: for use with openEuler on Sipeed LicheePi 4A (16G RAM)</li>
<li><code>board-image/uboot-oerv-sipeed-lpi4a-8g</code>: for use with openEuler on Sipeed LicheePi 4A (8G RAM)</li>
<li><code>board-image/uboot-revyos-sipeed-lpi4a-16g</code>: for use with RevyOS on Sipeed LicheePi 4A (16G RAM)</li>
<li><code>board-image/uboot-revyos-sipeed-lpi4a-8g</code>: for use with RevyOS on Sipeed LicheePi 4A (8G RAM)</li>
</ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[RuyiSDK now supports displaying news]]></title>
            <link>https://archfeh.github.io/ruyisdk-org/en/blog/2024/01/14/ruyi-news</link>
            <guid>https://archfeh.github.io/ruyisdk-org/en/blog/2024/01/14/ruyi-news</guid>
            <pubDate>Sun, 14 Jan 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[We have added support for news items to ruyi for you to follow]]></description>
            <content:encoded><![CDATA[<p>We have added support for news items to <code>ruyi</code> for you to follow
RuyiSDK development more easily.</p>
<p>If you are on ruyi 0.3 or greater, any incoming news item will appear
after a successful <code>ruyi update</code>. You can list all news items with
<code>ruyi news list</code>, and read with <code>ruyi news read</code>.</p>
<p>Thank you for supporting RuyiSDK!</p>]]></content:encoded>
        </item>
    </channel>
</rss>